dependencies {
    compile "org.hibernate:hibernate-core:${hibernateVersion}"
    compile "org.hibernate:hibernate-entitymanager:${hibernateVersion}"
    compile "uk.gov.hmcts.reform.auth:auth-checker-lib:${authCheckerVersion}"
    compile group: 'uk.gov.hmcts.reform', name: 'service-auth-provider-client', version: '0.6.0'
    compile group: 'com.zaxxer', name: 'HikariCP', version: '2.7.7'
    testCompile 'io.github.openfeign:feign-jackson:9.5.1'
    testCompile "org.exparity:hamcrest-date:2.0.4"
    testCompile "io.rest-assured:rest-assured:3.0.6"
    testCompile "org.springframework.boot:spring-boot-starter-test:${springBootVersion}"
}

sourceSets {
    aat {
        java {
            srcDir('${rootDir}/src/aat/java')
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
        resources {
            srcDir('src/aat/resources')
        }
    }
}

task functional(type: Test) {
    systemProperty "http.proxyHost", System.getProperty('http.proxyHost')
    systemProperty "http.proxyPort", System.getProperty('http.proxyPort')
    systemProperty "https.proxyHost", System.getProperty('https.proxyHost')
    systemProperty "https.proxyPort", System.getProperty('https.proxyPort')

    group = 'Delivery pipeline'
    description = 'Executes functional tests against an AAT CCD Definition Store Instance'
    setTestClassesDirs(sourceSets.aat.output.classesDirs)
    setClasspath(sourceSets.aat.runtimeClasspath)
    include "uk/gov/hmcts/ccd/definitionstore/tests/functional/**"
    useJUnitPlatform()
}




