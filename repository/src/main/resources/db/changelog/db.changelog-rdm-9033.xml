<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="rdm-9033" author="kiran.yenigala@hmcts.net">

        <!-- ChangeOrganisationRequest -->
        <insert tableName="field_type">
            <column name="created_at" value="${now}"/>
            <column name="reference" value="ChangeOrganisationRequest"/>
            <column name="version" value="1" />
            <column name="base_field_type_id"
                    valueComputed="(select id from field_type where reference = 'Complex'
                        and jurisdiction_id is null
                        and version = (select max(version) from field_type
                        where reference = 'Complex'
                        and jurisdiction_id is null
                        and base_field_type_id is null))" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="OrganisationToAdd" />
            <column name="label" value="Organisation To Add" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Organisation'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="OrganisationToRemove" />
            <column name="label" value="Organisation To Remove" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Organisation'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="CaseRoleId" />
            <column name="label" value="Case Role Id" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Text'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="Reason" />
            <column name="label" value="Reason" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Text'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="RequestTimestamp" />
            <column name="label" value="Request Timestamp" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'DateTime'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="ApprovalStatus" />
            <column name="label" value="Approval Status" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Number'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="ApprovalRejectionTimestamp" />
            <column name="label" value="Approval Rejection Timestamp" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'DateTime'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

        <insert tableName="complex_field">
            <column name="reference" value="NotesReason" />
            <column name="label" value="Notes Reason" />
            <column name="security_classification" value="PUBLIC" />
            <column name="field_type_id"
                    valueComputed="(select id from field_type
                        where reference = 'Text'
                        and version = 1
                        and jurisdiction_id is null)" />
            <column name="complex_field_type_id"
                    valueComputed="(select id from field_type where reference = 'ChangeOrganisationRequest'
                        and version = 1
                        and jurisdiction_id is null)" />
        </insert>

    </changeSet>

</databaseChangeLog>
