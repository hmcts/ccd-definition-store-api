# Completely disable OIDC client and provider config
spring.security.oauth2.client.registration=
spring.security.oauth2.client.provider=

# Override the issuer-uri that's causing the connection issue
spring.security.oauth2.client.provider.oidc.issuer-uri=

# Disable flyway + database
spring.flyway.enabled=false

# Avoid elastic health failing test context
management.health.elasticsearch.enabled=false

# Disable component scanning for problematic packages
spring.main.sources=uk.gov.hmcts.ccd.definition.store.elastic
management.endpoints.enabled-by-default=false

# Disable SpringDoc entirely for tests
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

# Disable all management endpoints to avoid security issues
management.endpoint.health.enabled=false
management.endpoint.info.enabled=false

# Add to application-test.properties - exclude IDAM auto-configuration
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,org.springdoc.core.configuration.SpringDocConfiguration,org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration,uk.gov.hmcts.reform.idam.client.config.IdamClientAutoConfiguration

# Also disable IDAM properties
idam.api.url=disabled
idam.client.id=disabled
idam.client.secret=disabled

elasticsearch.host=localhost
elasticsearch.port=9200
elasticsearch.scheme=http
elasticsearch.enabled=true
elasticsearch.indexShards=8
elasticsearch.indexShardsReplicas=3
elasticsearch.failImportIfError=true
elasticsearch.dynamic=true
